let animadores={};function initAnimadores(){if("undefined"==typeof countUp)return void console.error("ERRO: Biblioteca CountUp não está carregada. As animações não funcionarão.");console.log("Iniciando animadores (Férias)...");const o={duration:.8,useEasing:!0,decimal:",",separator:".",prefix:"R$ "},e={"res-liquido-ferias":o,"res-total-bruto":{...o,prefix:"+R$ "},"res-total-descontos":{...o,prefix:"-R$ "}};try{for(const o in e){const t=document.getElementById(o);t?(animadores[o]=new countUp.CountUp(t,0,e[o]),animadores[o].error?console.error(`Erro ao criar animador Férias #${o}:`,animadores[o].error):(animadores[o].start(),console.log(`Animador Férias #${o} iniciado.`))):console.warn(`Elemento Férias #${o} não encontrado.`)}}catch(o){console.error("Erro fatal no initAnimadores (Férias):",o)}}function calcularFerias(){const o=getFloat("salario-bruto");let e=getFloat("dias-ferias");const t=getFloat("dependentes"),a=getChecked("vender-ferias");e=Math.max(5,Math.min(30,e||30));const n=o/30*e,r=n/3,i=n+r;let s=0,l=0;a&&e>15&&(l=Math.min(10,Math.floor(e/3)),s=o/30*l,s+=s/3);const c=calcularINSS_Progressivo(i),d=calcularIRRF_Preciso(i,c,t),u=i-c-d+s,m=i+s,p=c+d,f=[];return n>0&&f.push({nome:`Férias (${e} dias)`,valor:n,tipo:"provento"}),r>0&&f.push({nome:"1/3 Constitucional",valor:r,tipo:"provento"}),s>0&&f.push({nome:`Abono Pecuniário (${l} dias + 1/3)`,valor:s,tipo:"provento"}),c>0&&f.push({nome:"INSS sobre Férias",valor:c,tipo:"desconto"}),d>0&&f.push({nome:"IRRF sobre Férias",valor:d,tipo:"desconto"}),{liquidoFinal:isNaN(u)?0:u,brutoTotal:isNaN(m)?0:m,descontosTotal:isNaN(p)?0:p,detalhes:f}}function atualizarUI(){try{const o=calcularFerias();if(console.log("Resultado Férias:",o),animadores["res-liquido-ferias"])animadores["res-liquido-ferias"].update(o.liquidoFinal);else{const e=document.getElementById("res-liquido-ferias");e&&(e.innerText=formatBRL(o.liquidoFinal))}if(animadores["res-total-bruto"])animadores["res-total-bruto"].update(o.brutoTotal);else{const e=document.getElementById("res-total-bruto");e&&(e.innerText=formatBRL(o.brutoTotal))}if(animadores["res-total-descontos"])animadores["res-total-descontos"].update(o.descontosTotal);else{const e=document.getElementById("res-total-descontos");e&&(e.innerText=formatBRL(o.descontosTotal))}const e=document.getElementById("tax-details-ferias");if(e){e.textContent="";let t=0,a=0;const n=document.createDocumentFragment(),r=document.createDocumentFragment();(o.detalhes||[]).forEach((o=>{o&&o.valor>0&&("provento"===o.tipo?(n.appendChild(criarTaxItem(o.nome,o.valor,0,"provento")),t+=o.valor):(r.appendChild(criarTaxItem(o.nome,o.valor,0,"desconto")),a+=o.valor))})),t>0&&(n.appendChild(criarTaxItemTotal("Total Bruto",t,"provento")),e.appendChild(n)),a>0&&(r.appendChild(criarTaxItemTotal("Total Descontos",a,"desconto")),e.appendChild(r)),0===e.childElementCount&&(e.innerHTML='<div class="tax-item"><span>Preencha os dados</span></div>')}atualizarAlturasAccordions()}catch(o){console.error("Erro em atualizarUI (Férias):",o)}}function atualizarAlturasAccordions(){document.querySelectorAll(".accordion-content").forEach((o=>{const e=o.previousElementSibling;e&&e.classList.contains("active")&&(o.style.maxHeight=o.scrollHeight+"px")}))}if("undefined"!=typeof window){const o=debounce(atualizarUI,300);document.addEventListener("DOMContentLoaded",(()=>{console.log("DOM Carregado (Férias). Adicionando Listeners..."),["salario-bruto","dias-ferias","dependentes","vender-ferias"].forEach((e=>{const t=document.getElementById(e);if(t){const e="checkbox"===t.type?"change":"input";t.addEventListener(e,o)}else console.warn(`Elemento input Férias #${e} não encontrado.`)})),document.querySelectorAll(".accordion-button").forEach((o=>{o.addEventListener("click",(()=>{o.classList.toggle("active");const e=o.nextElementSibling;e.style.maxHeight&&"fit-content"!==e.style.maxHeight?e.style.maxHeight=null:e.style.maxHeight=e.scrollHeight+"px"}))}))})),window.addEventListener("load",(()=>{console.log("Window Carregado (Férias). Inicializando Calculadora...");try{if("undefined"==typeof countUp)return void console.error("ERRO CRÍTICO (Férias): Biblioteca CountUp.js não carregou a tempo!");initAnimadores(),atualizarUI()}catch(o){console.error("Erro durante o window.onload (Férias):",o)}}))}